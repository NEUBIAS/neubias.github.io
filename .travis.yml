language: node_js
branches:
  only:
  - source
node_js:
- '7'
before_install:
- rvm install 2.4.0
before_script:
- npm i -g gulp-cli
- npm install
- gem install bundler
- bundle install
script:
- gulp build-clean  --production
after_success:
- git clone https://$GITHUB_REPO
- git branch
- cd $(basename ${GITHUB_REPO%.git})
- git config user.name "Travis CI"
- git config user.email ${EMAIL}
- rsync -az --delete --exclude '.git*' ../_site/ .
- touch .nojekyll
- git add -A .
- git commit -m "Generated Jekyll site by Travis CI - ${TRAVIS_BUILD_NUMBER}"
- git push --force "https://user:${GH_TOKEN}@${GITHUB_REPO}" HEAD:${REPO_TARGET_BRANCH}
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - GITHUB_REPO: github.com/neubias/neubias.github.io
  - REPO_TARGET_BRANCH: master
  - secure: bGOzunb0X7FwWIfGDVkGI2SNF2ZCpw1d0UZmIONK+q9H/ZfiomtXaMUDAVJpF7adgvDcXRU1OwjwBSr7aHpJY5jD7btLEBokYc1EMSlRJ+IoPUqUJL11iuXJFDfZL4ZK/Ck9KD7jspr0sphmNRCZr/8+DUw1KY3Tt5xlWPumb6RFV0lYCQtK74lL9zM6VI9lSPGpgPB6jAW6Ps31AM9n2Bc7BLJyrEbxygM95l++W5dPKzmAntjhjsgjZyW1FflCny3LgCLQF9Xy745oErKkhVec2DT8LBO7IwD2mp5LNs5jpFJK0cPggbHCOMXD5kdRX0yr8JUH8xTKtnYXd/bNgGigFojFRVoxacPwxWsLr2xZGgTul7qm1bEla0uVnTCKSgxue5T0jwkaxxWIHpkYYdRm+ZNRyy66WC+Pwp6acBs6FmWvMTVbhOa2fWjYJWT8sQzqG1QfWTqqaIx7mkt/gXcNFZh1IWqql0+q04agn4uO9eOpJvP/r8snGK9QjR0BlH0Wyqan5iXIzdfq2UFZm/ngFqNvb0S802n7o1qJ+KB/aAe1Fk9ZeCSstzz++Dju4R3sTaxnJ7Y9P41qVKo2M91B6g/92L+yLDfTLNrwicLD1Rdpl+hqCmbYReh23WvtwElLk6VDdhMY3otBJVFZFoEJcDIsnxUyUOxtjiJL9Jk=
  - secure: IvwocnI/v1gTQ+86j/scUjIHPOj/RpuLCwkf9ptHrqAU1v6JDTZuTVszy4e8ryRFe5Zlo83zuqaaHDJdDC1HF3HLaQVsqMK+h31zTW8KJpdU6V8zDA1XeOluz7x1+mDwstqG2LHGgJbS/0mJScjWB/WGVh4T9UYQDac3IsLyKm3ECUKkVnMQQHdXU41kQW0xoIxWQMcHcG8oCV88mN+NhZtRw8A8zIucee08ibIo4rkTvXH7ci5JPuzbG+EmI41zFbZiYHAey5XbC9mrV+pLo8nSPxz+MRHVdz0j8tXV4JoJtp4DTomWAoioeMvpbzyIW6yYne2JXVAhSI2vV5bGMHRgs/yajeZWWaY3iVUTXdjyWhPXvniZKbE4oocjoW062VAKDWln1Z3eAzJm8a4NmN0qnbZf/cTIyQf0k2UXm9F1mceXoAFY65NKk6K+LQEpXqPUI87Yc12ayvWCX9amBnzReZM9OY6GbYvS6WX97MU45YryQt+I+qQVTZXVgmt/Y4+Tz8ThyuF5ynzeiBqzYcSEDQ8Kn+EgOzozmPVV0IsRpHcDpdilWu55bVDFLP///o0t46DYaLOvIjBMPP0bnP4DXMs6cOolKJbXFF6pWfp2pEv3KtDIgcfeQj8j1IlUT6UXQ49G/HacXkNjDk+ue7Dyvb7cdSAvgWgn9RiyE7o=
